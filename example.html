<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<script src="graphml2svg/js/jquery.js" ></script>	


	<script src="lib/lex.js" ></script>
	<script src="lib/ir.nodes.js" ></script>	
	<script src="lib/ir.other.js" ></script>	
	<script src="lib/ir.gen.js" ></script>	
	<script src="lib/graphml.gen.js" ></script> 

	<script src="graphml2svg/js/xslt.js" ></script>	
        <script src="graphml2svg/js/layout.js" ></script>	

	<title>Parser</title>
</head>

<body>

<div class="container" id="page">
<h2>
Sisal translator check
</h2>
<script language=JavaScript>
function trn() {
  var ast=lex.parse(document.getElementById('source').value);
  console.log(ast);
  var ir= new node.sisalir(ast);
  console.log(ir);
  console.log(ir.toGraphML());
  document.getElementById('visBtn').style.display = '';
}
function exc() {
  var ast=lex.parse(document.getElementById('source').value);
  var ir= new node.sisalir(ast);
  console.log(ir.execute());
}

function vis() {
xsl = XsltTransform.getXMLFromUrl('graphml2svg/graphml2svg.xsl');
Layout.prepareGraphML(ir.toGraphML(), ir, function(xml) {
    svgimg = XsltTransform.transformXslt(xml, xsl, {
        canvasWidth: '400',
        canvasHeight: '400',
        collapsedNodeWidth: '42',
        collapsedNodeHeight: '42'
    });
    var node = Layout.getVisNode();
    node.innerHTML = svgimg;
});


}
</script>
<textarea id="source" rows="12" cols="80">
function Main2( M,N : integer returns integer )
	M+N*M
end function
</textarea>
<!-- 
function Main2( M,N : integer returns integer )
	M+N
end function
-->
<p><button onclick='trn();'>translate (result in console log)</button></p>
<p><button onclick='exc();'>translate & execute (result in console log)</button></p>
<p><button onclick='vis();' id='visBtn' style='display:none;'>vis (result in console log)</button></p>

Another example:
<pre>
function Main( A,B: array[array[real]];  M,N,L : integer returns array[array[real]] )
  for i in 1, M cross j in 1, L
  returns array of 
      for k in 1, N repeat
	R := A[i,k] * B[k,j]
      returns sum of R 
      end for
  end for
end function
</pre>
</div><!-- page -->

</body>
</html>
 